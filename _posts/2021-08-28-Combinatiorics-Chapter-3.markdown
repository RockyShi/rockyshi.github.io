---
layout: post
title: "Combinatorics Chapter 3"
subtitle: "Reading notes and excercises of 'The combinatorics in programming'"
date: 2021-08-28
author: Rocky Shi
category: notes
tags: notes combinatorics
finished: false
---

## 笔记
### 3.1 基本概念

    这部分属于高中程度,没有什么问题。

### 3.2 分拆与置换

    这里的有些表示方法还没有完全吃透。

### 3.3 排列与组合的生成算法

    这部分是竞赛的基础，滚瓜烂熟。

### 3.4 购票问题

    * 算法3的f(m,0)=1让我困惑了一下，我原以为是m!。后来在草稿纸上列了一下，发现是我搞混了。在最终讨论的结果里，拿50元的人是没有区别的，如果以排列讨论，最终要除去n!，或者开始就以组合讨论。文中用组合讨论，所以答案是1,而我拐到了排列那边，得到了m!的答案。<p/>
    * 算法5的理解还不完全。到二叉树的模型转换能理解，但对Catalan数不了解。而排列组合方法中，不符合特征的数如何与n+1个0和n-1个1一一对应起来也还没弄清楚。

### 3.5 “方程的解”问题

    * 如何得到C(p'+n-1,n-1)的过程能明白。
    * 用质因数的方式只做高精度乘法的要点在于把前面公式从除法表示改写成连续整数的乘法。

## 书面练习

##### 1. 证明C(n,m)是整数，m<=n

##### 2. 当n为多大时，n!超过pascal规定的长整型的上界。

##### 3. 证明C(n, r) = C(n, n-r)

##### 4. 1730年James Stirling给出了n!的近似公式sqrt(2* pi * n)*(n/e)^n

   (1) n=20时误差是多少
   (2) 理论分析可得相对误差近似于1/(12 * n)，考虑这一相对误差后20!的误差是多少

##### 5. 能整除1400的正整数有多少个?

   解： 1400=2^3 * 5^2 * 7,即从三个集合[1,2,4,8],[1,5,25]和[1,7]中各取一个相乘，都能被1400整除。根据乘法原理，答案是24。
    
##### 6. n个完全一样的球，放到r个有标志的盒子中，且n>=r，要求无一空盒，有多少种方案？

   解: 该题等价于将n个球放入一个大长盒子中，在球和球的间隙放入r-1个隔板，形成r个小盒子。由于一个间隙只能放一个隔板，所以没有空盒子。因此答案为C(n-1,r-1)
    
##### 7. 凸十边形的任意三个对角线不共点，试求这凸十边形的对角线共交于多少个点？把所有的对角线分成多少段？

   解： 凸十边形共有n*(n-3)/2=35条对角线。若任意三个对角线不共点，则有C(35,2)个交点。每条对角线与另外34条对角线都有交点，被34个交点分成35段。因此35条对角线共分成35*35段。
    
##### 8. 一个凸N边形，通过不相交于N边形内部的对角线，把N边形拆分成若干三角形。请证明不同拆分的数目为Catalan数。

##### 9. 设2n个点均匀地分布在一个圆的圆周上。能用n条不相交的弦把这些点两两配对。证明这种配对的方法数是第n个Catalan数。

## 编程练习

##### 10. 输入n(n<=2000)，输出n!的末尾的零的个数。

    零的个数主要是考虑2和5,要对1到n进行因数分解，统计2和5的个数。一般来说2肯定比5多，所以统计5的个数就够了。
    int count_zero(int n)
    {
      int count=0, factor = 5;
      while(factor <= n)
      {
        count += n/factor;
        factor *=5;
      }
      return count;
    }

##### 11. 购票算法中的算法3可以修改为使用一个二维数组作为cache，如果cache里是-1，则f(m,n)是第一次计算，用递归继续，否则返回cache里的值。请分析修改后的时间复杂度。

    实现很简单，略。

##### 12. 若在购票问题中，m个人手持50,n个人手持100,则总方法数是多少？仿照书中实现并计算复杂度。

    使用算法3或4，仍然可以方便的计算出来。
    算法5还需要再想想。

##### 13. 电子锁问题。

###### 某机要部门安装了电子锁,要给M个工作人员（M<=7)每人发一张磁卡。卡上有一些密码特征，按规定至少有N个人(N<=4)同时使用各自的磁卡才能把锁打开。现在需要计算，电子锁上至少要有多少种特征，每个人的磁卡上至少要有多少个特征才能满足题设。要求电子锁总的特征数最少，特征编号以小写字母表示，将每个人的磁卡特征打印出来。例如M=3,N=2，则电子锁要用abc三个特征打开，三张磁卡分别是ab, bc和ac。

    设L(M,N)表示锁有几种特征，C(M,N)表示卡上有几种特征，则有
    L(M,M) = M, C(M,M) = 1
    L(M,1) = 1, C(M,1) = 1 
    L(3,2) = 3, C(3,2) = 2 
    L(4,2) = 4, C(4,2) = 3 即bcd,acd,abd,abc 
    L(M,2) = M, C(M,2) = M-1
    L(4,3) = 12 = L(3,2) * L(4,2), C(4,3) = 6 = C(3,2)*C(4,2) 即deghjk,abefkl,bcfdhi,acgijl
    (待续)

##### 14. 铁轨问题。

###### 某城市有一个火车站，有三条铁轨ABC，其中A和B分别和C相连。每列火车都由A进入火车站，经由C到达B，再驶出火车站。假设A有n节车厢，分别编号从1到n（n<=1000）,假设C可停放任意多节车厢，但车厢一旦进入C，就不能退回A;一旦进入B，就不能退回C。负责车厢调度的工作人员需要知道能否以某一个特定车厢序列A1,A2,A3,...,An从B驶出。

    类似书中的进出栈问题，若i<j<k而Aj<Ak<Ai则不满足出栈队列可能。

##### 15. 计数问题。

###### 以<将n个不同的对象排成一列，有n!种排法。如果以<或者=将n个不完全相同的对象排成一列，有多少种排法。例如n=2，有3种a=b,a<b,b<a；注意a=b和b=a是一样的。若n=3则有13种

    设se(n)表示题设要求的排列数，将n个元素分为两组，一组只用<，一组只用=且至少有两个元素。存在=的组应整体视为一个元素和另一组的元素进行全排列。
    对于2个元素而言，分组有2种：(0,2)和(2,0)。(0,2)即两个元素只用=，则只有一种a=b；(2,0)即两个元素只用<，则有两种a<b,b<a。即se(2)=3=1+2=C(2,2)+P(2,2)
    对于3个元素而言，分组有3种：(0,3),(1,2)和(3,0)。(0,3)即三个元素全用=，只有一种a=b=c；(1,2)即两个元素用=，和另外1个元素全排列；(3,0)即全部元素用<，有3!种。即se(3)=13=1+6+6=C(3,3)+C(3,2)C(1,1)P(2,2)+P(3,3) 
    代码如下，设已有函数定义int Perm(int m, int n)和int Comb(int m, int n)来计算排列和组合的数目。
    
    int count(int n)
    {
      // The result of no equal mark
      int sum = Combination(n, n).permCount();
      // The equal elements count
      for (int e = n; e > 0; e--)
      {
        if (e == 1) continue;
        int g = n - e;  // The greater elements count
        // C(n,e)
        sum += Combination(n, e).combCount() * Combination(g + 1, g + 1).permCount();
      }
      return sum;
    }
    
##### 16. 走道铺砖问题。

###### 一栋正在修建的大楼需要铺设多个走道。地板砖只有1*2一种规格，而业主不希望任意两个走道有重复的铺设方案。对一个N*M(N*M为偶数)的走道，用1*2的地砖铺满，有多少种方案？其中min(N,M)<=12，1<=N,M<=40且N*M为偶数。

## 一些说明和感想

## 更新日志
           
